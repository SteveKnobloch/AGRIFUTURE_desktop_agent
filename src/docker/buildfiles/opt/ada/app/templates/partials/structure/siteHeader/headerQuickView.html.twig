{% if analysis.state == 'running' %}
    {% set date = analysis.dateStart %}
{% endif %}
{% if analysis.state == 'paused' %}
    {% set date = analysis.datePaused %}
{% endif %}
{% if analysis.state == 'completed' %}
    {% set date = analysis.dateCompleted %}
{% endif %}
{% if analysis.state == 'crashed' %}
    {% set date = analysis.dateCrashed %}
{% endif %}

<div class="card bg-white p-2 analysis">
    <div class="d-flex justify-content-between mb-1">
        <span class="analysis-title text-truncate">
            <strong>
                <small>
                     {{ analysis.title }}
                </small>
            </strong>
        </span>
        <div class="d-flex">
            <a class="btn btn-link btn-small"
               href="{{ path('app_page_analysis_show') }}"
               title="{{ 'Show details of the current analysis' | trans }}">
                <i class="bi bi-eye"></i>
                {{ 'Details' | trans }}
            </a>
            {% if analysis.state != 'crashed' %}
                <a class="btn btn-link btn-small"
                   href="#" title="{{ 'Show results of the current analysis on the AGRIFUTURΞ website' | trans }}">
                    <i class="bi bi-bar-chart"></i>
                    {{ 'Results' | trans }}
                </a>
            {% endif %}
        </div>
    </div>

    <div class="d-flex justify-content-between">
        {% include 'partials/states/badge.html.twig' with {
            'state': analysis.state,
            'small': '1'
        } %}
        <div class="dates text-nowrap ms-2">
            {% include 'partials/states/dates/dateAndTime.html.twig' with {
                'date': date,
                'small': '1'
            } %}
        </div>
        {% if analysis.state == 'crashed' or analysis.state == 'completed' %}
            <a href="{{ path('app_page_analysis_register') }}" class="btn btn-primary btn-small">
                <i class="bi bi-eyedropper"></i>
                {{ 'new analysis' | trans }}
            </a>
        {% endif %}
    </div>
</div>
