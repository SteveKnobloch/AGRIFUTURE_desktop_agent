/**
 * @author Rene Gropp <rene.gropp@tritum.de>
 */

// document ready - start
document.addEventListener("DOMContentLoaded", function (event) {
    initOptions();
});

function initOptions() {
    const data = {
        'FLO-FLG001': [
            'SQK-16S024',
            'SQK-CS9109',
            'SQK-DCS108',
            'SQK-DCS109',
            'SQK-LRK001',
            'SQK-LSK108',
            'SQK-LSK109',
            'SQK-LSK109-XL',
            'SQK-LSK110',
            'SQK-LSK110-XL',
            'SQK-LSK111',
            'SQK-LSK111-XL',
            'SQK-LWB001',
            'SQK-LWP001',
            'SQK-MLK111-96-XL',
            'SQK-NBD111-24',
            'SQK-NBD111-96',
            'SQK-PBK004',
            'SQK-PCB109',
            'SQK-PCB110',
            'SQK-PCB111-24',
            'SQK-PCS108',
            'SQK-PCS109',
            'SQK-PCS111',
            'SQK-PSK004',
            'SQK-RAB201',
            'SQK-RAB204',
            'SQK-RAD002',
            'SQK-RAD003',
            'SQK-RAD004',
            'SQK-RAS201',
            'SQK-RBK001',
            'SQK-RBK004',
            'SQK-RBK110-96',
            'SQK-RBK111-24',
            'SQK-RBK111-96',
            'SQK-RLB001',
            'SQK-RLI001',
            'SQK-RNA001',
            'SQK-RNA002',
            'SQK-RPB004',
            'SQK-ULK001',
            'VSK-PTC001',
            'VSK-VBK001',
            'VSK-VMK001',
            'VSK-VMK004',
            'VSK-VPS001',
            'VSK-VSK001',
            'VSK-VSK003',
            'VSK-VSK004'
        ],
        'FLO-FLG111': [
            'SQK-16S024',
            'SQK-CS9109',
            'SQK-DCS108',
            'SQK-DCS109',
            'SQK-LRK001',
            'SQK-LSK108',
            'SQK-LSK109',
            'SQK-LSK109-XL',
            'SQK-LSK110',
            'SQK-LSK110-XL',
            'SQK-LWB001',
            'SQK-LWP001',
            'SQK-PBK004',
            'SQK-PCB109',
            'SQK-PCB110',
            'SQK-PCS108',
            'SQK-PCS109',
            'SQK-PSK004',
            'SQK-RAB201',
            'SQK-RAB204',
            'SQK-RAD002',
            'SQK-RAD003',
            'SQK-RAD004',
            'SQK-RAS201',
            'SQK-RBK001',
            'SQK-RBK004',
            'SQK-RBK110-96',
            'SQK-RLB001',
            'SQK-RLI001',
            'SQK-RPB004',
            'SQK-ULK001',
            'VSK-PTC001',
            'VSK-VBK001',
            'VSK-VMK001',
            'VSK-VSK001',
            'VSK-VSK003'
        ],
        'FLO-MIN106': [
            'SQK-16S024',
            'SQK-CS9109',
            'SQK-DCS108',
            'SQK-DCS109',
            'SQK-LRK001',
            'SQK-LSK108',
            'SQK-LSK109',
            'SQK-LSK109-XL',
            'SQK-LSK110',
            'SQK-LSK110-XL',
            'SQK-LSK111',
            'SQK-LSK111-XL',
            'SQK-LSK112',
            'SQK-LSK112-XL',
            'SQK-LWB001',
            'SQK-LWP001',
            'SQK-MLK111-96-XL',
            'SQK-NBD111-24',
            'SQK-NBD111-96',
            'SQK-NBD112-24',
            'SQK-NBD112-96',
            'SQK-PBK004',
            'SQK-PCB109',
            'SQK-PCB110',
            'SQK-PCB111-24',
            'SQK-PCS108',
            'SQK-PCS109',
            'SQK-PCS111',
            'SQK-PSK004',
            'SQK-RAB201',
            'SQK-RAB204',
            'SQK-RAD002',
            'SQK-RAD003',
            'SQK-RAD004',
            'SQK-RAD112',
            'SQK-RAS201',
            'SQK-RBK001',
            'SQK-RBK004',
            'SQK-RBK110-96',
            'SQK-RBK111-24',
            'SQK-RBK111-96',
            'SQK-RBK112-24',
            'SQK-RBK112-96',
            'SQK-RLB001',
            'SQK-RLI001',
            'SQK-RNA001',
            'SQK-RNA002',
            'SQK-RPB004',
            'SQK-ULK001',
            'VSK-PTC001',
            'VSK-VBK001',
            'VSK-VMK001',
            'VSK-VMK004',
            'VSK-VPS001',
            'VSK-VSK001',
            'VSK-VSK003',
            'VSK-VSK004'
        ],
        'FLO-MIN107': [

            ' SQK-DCS108',
            ' SQK-DCS109',
            ' SQK-LRK001',
            ' SQK-LSK108',
            ' SQK-LSK109',
            ' SQK-LSK308',
            ' SQK-LSK309',
            ' SQK-LSK319',
            ' SQK-LWB001',
            ' SQK-LWP001',
            ' SQK-PBK004',
            ' SQK-PCS108',
            ' SQK-PCS109',
            ' SQK-PSK004',
            ' SQK-RAB201',
            ' SQK-RAB204',
            ' SQK-RAD002',
            ' SQK-RAD003',
            ' SQK-RAD004',
            ' SQK-RAS201',
            ' SQK-RBK001',
            ' SQK-RBK004',
            ' SQK-RLB001',
            ' SQK-RLI001',
            ' SQK-RNA001',
            ' SQK-RNA002',
            ' SQK-RPB004',
            ' VSK-VBK001',
            ' VSK-VMK001',
            ' VSK-VSK001'
        ],
        'FLO-MIN110': [
            'SQK-16S024',
            'SQK-CS9109',
            'SQK-DCS108',
            'SQK-DCS109',
            'SQK-LRK001',
            'SQK-LSK108',
            'SQK-LSK109',
            'SQK-LSK109-XL',
            'SQK-LSK110',
            'SQK-LSK110-XL',
            'SQK-LWB001',
            'SQK-LWP001',
            'SQK-PBK004',
            'SQK-PCB109',
            'SQK-PCB110',
            'SQK-PCS108',
            'SQK-PCS109',
            'SQK-PSK004',
            'SQK-RAB201',
            'SQK-RAB204',
            'SQK-RAD002',
            'SQK-RAD003',
            'SQK-RAD004',
            'SQK-RAS201',
            'SQK-RBK001',
            'SQK-RBK004',
            'SQK-RLB001',
            'SQK-RLI001',
            'SQK-RPB004',
            'VSK-VBK001',
            'VSK-VMK001',
            'VSK-VSK001'
        ],
        'FLO-MIN111': [
            'SQK-16S024',
            'SQK-CS9109',
            'SQK-DCS108',
            'SQK-DCS109',
            'SQK-LRK001',
            'SQK-LSK108',
            'SQK-LSK109',
            'SQK-LSK109-XL',
            'SQK-LSK110',
            'SQK-LSK110-XL',
            'SQK-LWB001',
            'SQK-LWP001',
            'SQK-PBK004',
            'SQK-PCB109',
            'SQK-PCB110',
            'SQK-PCS108',
            'SQK-PCS109',
            'SQK-PSK004',
            'SQK-RAB201',
            'SQK-RAB204',
            'SQK-RAD002',
            'SQK-RAD003',
            'SQK-RAD004',
            'SQK-RAS201',
            'SQK-RBK001',
            'SQK-RBK004',
            'SQK-RBK110-96',
            'SQK-RLB001',
            'SQK-RLI001',
            'SQK-RPB004',
            'SQK-ULK001',
            'VSK-PTC001',
            'VSK-VBK001',
            'VSK-VMK001',
            'VSK-VSK001',
            'VSK-VSK003'
        ],
        'FLO-MIN112': [
            'SQK-LSK112',
            'SQK-LSK112-XL',
            'SQK-NBD112-24',
            'SQK-NBD112-96',
            'SQK-RAD112',
            'SQK-RBK112-24',
            'SQK-RBK112-96'
        ],
        'FLO-MIN114': [
            'SQK-LSK114',
            'SQK-LSK114-XL',
            'SQK-NBD114-24',
            'SQK-NBD114-96',
            'SQK-RAD114',
            'SQK-RBK114-24',
            'SQK-RBK114-96',
            'SQK-ULK114'
        ],
        'FLO-MINSP6': [
            'SQK-16S024',
            'SQK-CS9109',
            'SQK-DCS108',
            'SQK-DCS109',
            'SQK-LRK001',
            'SQK-LSK108',
            'SQK-LSK109',
            'SQK-LSK109-XL',
            'SQK-LSK110',
            'SQK-LSK110-XL',
            'SQK-LSK111',
            'SQK-LSK111-XL',
            'SQK-LWB001',
            'SQK-LWP001',
            'SQK-MLK111-96-XL',
            'SQK-NBD111-24',
            'SQK-NBD111-96',
            'SQK-PBK004',
            'SQK-PCB109',
            'SQK-PCB110',
            'SQK-PCB111-24',
            'SQK-PCS108',
            'SQK-PCS109',
            'SQK-PCS111',
            'SQK-PSK004',
            'SQK-RAB201',
            'SQK-RAB204',
            'SQK-RAD002',
            'SQK-RAD003',
            'SQK-RAD004',
            'SQK-RAS201',
            'SQK-RBK001',
            'SQK-RBK004',
            'SQK-RBK110-96',
            'SQK-RBK111-24',
            'SQK-RBK111-96',
            'SQK-RLB001',
            'SQK-RLI001',
            'SQK-RNA001',
            'SQK-RNA002',
            'SQK-RPB004',
            'SQK-ULK001',
            'VSK-PTC001',
            'VSK-VBK001',
            'VSK-VMK001',
            'VSK-VMK004',
            'VSK-VPS001',
            'VSK-VSK001',
            'VSK-VSK003',
            'VSK-VSK004'
        ],
        'FLO-PRO001': [
            'SQK-DCS109',
            'SQK-LSK109',
            'SQK-LSK109-XL',
            'SQK-LSK110',
            'SQK-LSK111',
            'SQK-LSK111-XL',
            'SQK-MLK111-96-XL',
            'SQK-NBD111-24',
            'SQK-NBD111-96',
            'SQK-PCB109',
            'SQK-PCB110',
            'SQK-PCB111-24',
            'SQK-PCS109',
            'SQK-PCS111',
            'SQK-RBK111-24',
            'SQK-RBK111-96',
            'SQK-RNA002',
            'VSK-VMK004',
            'VSK-VSK004'
        ],
        'FLO-PRO002-ECO': [
            'SQK-DCS109',
            'SQK-LSK109',
            'SQK-LSK109-XL',
            'SQK-LSK110',
            'SQK-LSK111',
            'SQK-LSK111-XL',
            'SQK-MLK111-96-XL',
            'SQK-NBD111-24',
            'SQK-NBD111-96',
            'SQK-PCB109',
            'SQK-PCB110',
            'SQK-PCB111-24',
            'SQK-PCS109',
            'SQK-PCS111',
            'SQK-RBK111-24',
            'SQK-RBK111-96',
            'SQK-RNA002',
            'VSK-VMK004',
            'VSK-VSK004'
        ],
        'FLO-PRO002M': [
            'SQK-DCS109',
            'SQK-LSK109',
            'SQK-LSK109-XL',
            'SQK-LSK110',
            'SQK-LSK111',
            'SQK-LSK111-XL',
            'SQK-LSK112',
            'SQK-LSK112-XL',
            'SQK-MLK111-96-XL',
            'SQK-NBD111-24',
            'SQK-NBD111-96',
            'SQK-NBD112-24',
            'SQK-NBD112-96',
            'SQK-PCB109',
            'SQK-PCB110',
            'SQK-PCB111-24',
            'SQK-PCS109',
            'SQK-PCS111',
            'SQK-RAD112',
            'SQK-RBK111-24',
            'SQK-RBK111-96',
            'SQK-RBK112-24',
            'SQK-RBK112-96',
            'SQK-RNA002',
            'VSK-VMK004',
            'VSK-VSK004'
        ],
        'FLO-PRO002': [
            'SQK-DCS109',
            'SQK-LSK109',
            'SQK-LSK109-XL',
            'SQK-LSK110',
            'SQK-LSK111',
            'SQK-LSK111-XL',
            'SQK-LSK112',
            'SQK-LSK112-XL',
            'SQK-MLK111-96-XL',
            'SQK-NBD111-24',
            'SQK-NBD111-96',
            'SQK-NBD112-24',
            'SQK-NBD112-96',
            'SQK-PCB109',
            'SQK-PCB110',
            'SQK-PCB111-24',
            'SQK-PCS109',
            'SQK-PCS111',
            'SQK-RAD112',
            'SQK-RBK111-24',
            'SQK-RBK111-96',
            'SQK-RBK112-24',
            'SQK-RBK112-96',
            'SQK-RNA002',
            'VSK-VMK004',
            'VSK-VSK004'
        ],
        'FLO-PRO111': [
            'SQK-16S024',
            'SQK-CS9109',
            'SQK-DCS108',
            'SQK-DCS109',
            'SQK-LRK001',
            'SQK-LSK108',
            'SQK-LSK109',
            'SQK-LSK109-XL',
            'SQK-LSK110',
            'SQK-LSK110-XL',
            'SQK-LWB001',
            'SQK-LWP001',
            'SQK-PBK004',
            'SQK-PCB109',
            'SQK-PCB110',
            'SQK-PCS108',
            'SQK-PCS109',
            'SQK-PSK004',
            'SQK-RAB201',
            'SQK-RAB204',
            'SQK-RAD002',
            'SQK-RAD003',
            'SQK-RAD004',
            'SQK-RAS201',
            'SQK-RBK001',
            'SQK-RBK004',
            'SQK-RBK110-96',
            'SQK-RLB001',
            'SQK-RLI001',
            'SQK-RPB004',
            'SQK-ULK001',
            'VSK-PTC001',
            'VSK-VBK001',
            'VSK-VMK001',
            'VSK-VSK001',
            'VSK-VSK003'
        ],
        'FLO-PRO112M': [
            'SQK-LSK112',
            'SQK-LSK112-XL',
            'SQK-NBD112-24',
            'SQK-NBD112-96',
            'SQK-RAD112',
            'SQK-RBK112-24',
            'SQK-RBK112-96'
        ],
        'FLO-PRO112': [
            'SQK-LSK112',
            'SQK-LSK112-XL',
            'SQK-NBD112-24',
            'SQK-NBD112-96',
            'SQK-RAD112',
            'SQK-RBK112-24',
            'SQK-RBK112-96'
        ],
        'FLO-PRO114M': [
            'SQK-LSK114',
            'SQK-LSK114-XL',
            'SQK-NBD114-24',
            'SQK-NBD114-96',
            'SQK-RAD114',
            'SQK-RBK114-24',
            'SQK-RBK114-96',
            'SQK-ULK114'
        ],
        'FLO-PRO114': [
            'SQK-LSK114',
            'SQK-LSK114-XL',
            'SQK-NBD114-24',
            'SQK-NBD114-96',
            'SQK-RAD114',
            'SQK-RBK114-24',
            'SQK-RBK114-96',
            'SQK-ULK114'
        ]
    };

    addFlocellTypeOptions(Object.getOwnPropertyNames(data));
    toggleDependentOptions(data);
}

function addFlocellTypeOptions(data) {
    const flowcellTypeSelect = document.getElementById('analysis_form_flowcellType');

    // add Flowcell-Type options
    for (const type of data) {
        const option = document.createElement('option');
        option.value = type;
        option.text = type;
        flowcellTypeSelect.appendChild(option);
    }
};

function toggleDependentOptions(data) {
    const flowcellTypeSelect = document.getElementById('analysis_form_flowcellType'),
        libraryKitSelect = document.getElementById('analysis_form_libraryToolkit'),
        libraryKitSelectFirstOption = libraryKitSelect.querySelectorAll('option')[0];

    libraryKitSelectFirstOption.removeAttribute('selected');// hide "please select"
    addLibraryKitOptions();

    flowcellTypeSelect.addEventListener('change', function () {
        addLibraryKitOptions(data);
    });

    function addLibraryKitOptions(data) {
        const optionsOld = libraryKitSelect.querySelectorAll('option:not(:first-child)'),
            value = flowcellTypeSelect.value;

        if (value) {
            const libraryKitGroup = data[value];

            // remove existing options except the first "please select"-option
            optionsOld.forEach(function (optionOld) {
                optionOld.remove();
            });

            // add new options dependent on selected Flowcell-Type
            if (libraryKitGroup) {
                for (const libraryKit of libraryKitGroup) {
                    const option = document.createElement('option');
                    option.value = libraryKit;
                    option.text = libraryKit;
                    libraryKitSelect.appendChild(option);
                }
            }

            // enable library-kit select
            libraryKitSelect.removeAttribute('disabled');
            libraryKitSelectFirstOption.setAttribute('selected', 'selected');
        }
    }
};
